<!-- einstellungen.html -->
<!DOCTYPE html>
<html lang="de">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Einstellungen - OptiFlow Dokumentation</title>
        <link rel="stylesheet" href="style.css" />

        <!-- Anti-Flicker Theme Loader -->
        <script>
            (function () {
                try {
                    const theme =
                        localStorage.getItem("doc_theme") || "default";
                    if (theme !== "default") {
                        document.documentElement.setAttribute(
                            "data-theme",
                            theme
                        );
                    }
                } catch (e) {
                    /* localStorage is not available */
                }
            })();
        </script>

        <script src="https://unpkg.com/lucide@latest" defer></script>
    </head>
    <body>
        <div class="theme-switcher theme-switcher-floating">
            <button id="theme-default" title="Helles Theme">
                <i data-lucide="sun"></i>
            </button>
            <button id="theme-dark" title="Dunkles Theme">
                <i data-lucide="moon"></i>
            </button>
            <button id="theme-contrast" title="Hoher Kontrast">
                <i data-lucide="contrast"></i>
            </button>
        </div>
        <header>
            <div class="header-title-wrapper">
                <h1>OptiFlow Dateimanager - Dokumentation</h1>
                <button id="pin-header-toggle" title="Kopfzeile fixieren">
                    <i data-lucide="pin"></i>
                </button>
            </div>
            <nav>
                <ul>
                    <li><a href="index.html">Übersicht</a></li>
                    <li><a href="installation.html">Installation</a></li>
                    <li><a href="erste_schritte.html">Erste Schritte</a></li>
                    <li>
                        <a href="funktionen_benutzer.html"
                            >Funktionen (Benutzer)</a
                        >
                    </li>
                    <li>
                        <a href="funktionen_admin.html">Funktionen (Admin)</a>
                    </li>
                    <li class="active">
                        <a href="einstellungen.html">Einstellungen</a>
                    </li>
                    <li>
                        <a href="technik_sicherheit.html"
                            >Technik & Sicherheit</a
                        >
                    </li>
                    <li><a href="datenmanagement.html">Datenmanagement</a></li>
                    <li><a href="tastenkürzel.html">Tastenkürzel</a></li>
                </ul>
            </nav>
        </header>
        <main>
            <section id="einstellungen-intro">
                <h2>Das Kontrollzentrum: Alle Einstellungen im Detail</h2>
                <p>
                    Der Einstellungs-Dialog ist die zentrale Anlaufstelle, um
                    OptiFlow an Ihre persönlichen Vorlieben und die
                    Anforderungen Ihres Unternehmens anzupassen. Die
                    Einstellungen sind in neun spezialisierte Bereiche
                    unterteilt, die hier detailliert erklärt werden. Nutzen Sie
                    dieses Akkordeon, um gezielt die Informationen zu finden,
                    die Sie benötigen.
                </p>
                <div class="info-box">
                    <h4>Speichern nicht vergessen!</h4>
                    <p>
                        Nachdem Sie Änderungen vorgenommen haben, müssen Sie
                        unten auf den <strong>"Speichern"</strong>-Button
                        klicken, damit diese wirksam werden. Ein Verlassen der
                        Einstellungen ohne Speichern verwirft alle Änderungen.
                    </p>
                </div>
            </section>

            <div class="accordion">
                <!-- 1. General Settings -->
                <div class="accordion-item">
                    <button class="accordion-header">
                        <i data-lucide="sliders-horizontal"></i> Allgemein
                    </button>
                    <div class="accordion-content">
                        <p>
                            Hier passen Sie das grundlegende Erscheinungsbild
                            der Anwendung an. Diese Einstellungen sind rein
                            kosmetischer Natur und für jeden Benutzer
                            individuell.
                        </p>
                        <div class="img-container">
                            <img
                                src="../img/settings/general.png"
                                alt="Allgemeine Einstellungen"
                            />
                            <p class="caption">
                                Passen Sie Theme und Schriftgröße an Ihre
                                Vorlieben an.
                            </p>
                        </div>
                        <ul>
                            <li>
                                <strong>Erscheinungsbild:</strong> Wählen Sie
                                zwischen dem hellen Standard-Design, einem
                                augenschonenden Dunkelmodus oder einem Modus mit
                                hohem Kontrast für maximale Lesbarkeit.
                            </li>
                            <li>
                                <strong>Schriftgröße:</strong> Skalieren Sie die
                                Schriftgröße der gesamten Anwendung stufenlos
                                über einen Schieberegler. Ideal zur Anpassung an
                                hochauflösende Bildschirme oder zur Verbesserung
                                der Barrierefreiheit.
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- 2. Search Settings -->
                <div class="accordion-item">
                    <button class="accordion-header">
                        <i data-lucide="search"></i> Suche
                    </button>
                    <div class="accordion-content">
                        <p>
                            Konfigurieren Sie das Herzstück von OptiFlow: die
                            Suche. Diese Einstellungen (nur für Admins) haben
                            direkten Einfluss auf die Suchergebnisse und deren
                            Darstellung für alle Benutzer.
                        </p>
                        <div class="img-container">
                            <img
                                src="../img/settings/search-main.png"
                                alt="Sucheinstellungen"
                            />
                            <p class="caption">
                                Steuern Sie Relevanz, Limits und die Darstellung
                                von Suchergebnissen.
                            </p>
                        </div>
                        <h4>Ergebnisse & Anzeige</h4>
                        <ul>
                            <li>
                                <strong>Maximale Suchergebnisse:</strong>
                                Begrenzen Sie die Anzahl der angezeigten
                                Treffer, um die Übersicht zu wahren (0 für
                                unbegrenzt).
                            </li>
                            <li>
                                <strong>Relevanz-Scores anzeigen:</strong>
                                Blenden Sie für jeden Treffer den berechneten
                                Score ein. Hilfreich, um die Sortierung
                                nachzuvollziehen.
                            </li>
                        </ul>
                        <h4>Relevanz-Bewertung (Punktesystem)</h4>
                        <ul>
                            <li>
                                Passen Sie die Gewichtung für verschiedene
                                Treffertypen an. Standardmäßig wird ein exakter
                                Treffer im Dateinamen am höchsten bewertet,
                                gefolgt von teilweisen Treffern im Namen und
                                Treffern im Inhalt.
                            </li>
                        </ul>
                        <h4>Vorschau-Snippets (In-Datei-Suche)</h4>
                        <div class="img-container">
                            <img
                                src="../img/settings/search-in-file.png"
                                alt="Einstellungen für In-Datei-Suche"
                            />
                            <p class="caption">
                                Details zur Konfiguration der Snippet-Anzeige.
                            </p>
                        </div>
                        <ul>
                            <li>
                                <strong>Maximale Snippets pro Datei:</strong>
                                Wie viele Textausschnitte sollen in der
                                In-Datei-Suche maximal angezeigt werden?
                            </li>
                            <li>
                                <strong>Snippet-Fenster:</strong> Definiert, wie
                                viele Zeichen vor und nach einem gefundenen Wort
                                im Snippet angezeigt werden.
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- 3. Scanner Settings -->
                <div class="accordion-item">
                    <button class="accordion-header">
                        <i data-lucide="scan-line"></i> Scanner
                    </button>
                    <div class="accordion-content">
                        <p>
                            Hier wird das Verhalten des Indexierungs-Prozesses
                            gesteuert. Diese Admin-Einstellungen sind kritisch
                            dafür, welche Dateien überhaupt von OptiFlow erfasst
                            werden.
                        </p>
                        <div class="img-container">
                            <img
                                src="../img/settings/scanner.png"
                                alt="Scanner-Einstellungen"
                            />
                            <p class="caption">
                                Definieren Sie Leistung, ignorierte Ordner und
                                Zieldateitypen für den Scan.
                            </p>
                        </div>
                        <ul>
                            <li>
                                <strong>Leistung:</strong> Legen Sie die
                                maximale Anzahl an CPU-Kernen für den Scan fest,
                                um die Systemlast zu steuern. Eine Verzögerung
                                (in ms) kann auf älteren Systemen helfen, die
                                Festplattenaktivität zu schonen.
                            </li>
                            <li>
                                <strong>Ignorierte Verzeichnisse:</strong>
                                Fügen Sie Ordnernamen wie <code>.git</code> oder
                                <code>node_modules</code> hinzu, die vom Scan
                                komplett ausgeschlossen werden sollen.
                            </li>
                            <li>
                                <strong>Dateitypen:</strong> Wählen Sie per
                                Checkbox aus, welche Dateiendungen (z.B.
                                <code>.pdf</code>, <code>.docx</code>) überhaupt
                                indexiert werden sollen.
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- 4. OCR Settings -->
                <div class="accordion-item">
                    <button class="accordion-header">
                        <i data-lucide="file-scan"></i> OCR
                    </button>
                    <div class="accordion-content">
                        <p>
                            Passen Sie die Details für die Texterkennung (OCR)
                            an. Diese Admin-Einstellungen beeinflussen die
                            Qualität und Geschwindigkeit der Umwandlung von
                            Bild-PDFs in durchsuchbare Dokumente.
                        </p>
                        <div class="img-container">
                            <img
                                src="../img/settings/ocr-main.png"
                                alt="Allgemeine OCR-Einstellungen"
                            />
                            <p class="caption">
                                Qualitäts-Presets und Optionen für die
                                Dateiausgabe.
                            </p>
                        </div>
                        <ul>
                            <li>
                                <strong>Qualitäts-Voreinstellungen:</strong>
                                Wählen Sie zwischen "Schnell", "Ausgeglichen"
                                und "Qualität", um technische Parameter wie DPI
                                und Optimierungslevel schnell zu setzen.
                                "Benutzerdefiniert" schaltet die manuellen
                                Regler frei.
                            </li>
                            <li>
                                <strong>Ausgabe-Optionen:</strong> Legen Sie
                                fest, ob die neuen, durchsuchbaren PDFs die
                                Originale überschreiben oder in einen separaten
                                Unterordner bzw. mit einem Präfix gespeichert
                                werden.
                            </li>
                            <li>
                                <strong>Standardverhalten:</strong> Bestimmen
                                Sie, ob OCR auch bei Dateien mit vorhandener
                                Textebene erzwungen werden soll.
                            </li>
                        </ul>
                        <div class="info-box tech">
                            <h4>Technische OCR-Einstellungen</h4>
                            <p>
                                Für Experten: Passen Sie Parameter wie die
                                OCR-Sprache (z.B. <code>deu+eng</code>), die
                                Bild-DPI, den Optimierungslevel oder zusätzliche
                                Tesseract-Konfigurationsbefehle direkt an.
                            </p>
                            <div class="img-container">
                                <img
                                    src="../img/settings/ocr-technical.png"
                                    alt="Technische OCR-Einstellungen"
                                />
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 5. Old Files Settings -->
                <div class="accordion-item">
                    <button class="accordion-header">
                        <i data-lucide="archive"></i> Alte Dateien
                    </button>
                    <div class="accordion-content">
                        <p>
                            Konfigurieren Sie als Admin die Suche nach alten und
                            potenziell veralteten Dateien, um das Dateisystem
                            sauber zu halten.
                        </p>
                        <div class="img-container">
                            <img
                                src="../img/settings/old-files.png"
                                alt="Einstellungen für alte Dateien"
                            />
                        </div>
                        <ul>
                            <li>
                                <strong>Filter & Limits:</strong> Definieren
                                Sie, ab welchem Alter (in Tagen) eine Datei als
                                "alt" gilt und wie viele Ergebnisse maximal
                                angezeigt werden sollen. Diese Werte dienen als
                                Standard, lassen sich aber im 'Alte Dateien'-Tab
                                für jede Suche individuell anpassen.
                            </li>
                            <li>
                                <strong>Sortierung:</strong> Wählen Sie, ob die
                                Ergebnisliste nach Alter oder Dateigröße
                                sortiert werden soll, und ob auf- oder
                                absteigend.
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- 6. De-duplication Settings -->
                <div class="accordion-item">
                    <button class="accordion-header">
                        <i data-lucide="copy-x"></i> Entduplizierung
                    </button>
                    <div class="accordion-content">
                        <p>
                            Feinabstimmung des Algorithmus zur Erkennung von
                            doppelten Dateien. Diese Admin-Einstellungen sind
                            für Experten gedacht, die die Balance zwischen
                            Genauigkeit und Geschwindigkeit anpassen möchten.
                        </p>
                        <div class="img-container">
                            <img
                                src="../img/settings/deduplication-main.png"
                                alt="Einstellungen für Entduplizierung"
                            />
                        </div>
                        <ul>
                            <li>
                                <strong>Gruppierung:</strong> Legen Sie fest,
                                wie viele Dateien eine Gruppe mindestens
                                enthalten muss, um als Duplikat-Set angezeigt zu
                                werden.
                            </li>
                            <li>
                                <strong>Analyse-Algorithmus (MinHash):</strong>
                                Passen Sie technische Parameter wie die
                                <strong>Shingle-Länge</strong>, die
                                <strong>Signaturgröße</strong> und den
                                <strong>Ähnlichkeitsschwellenwert</strong> (0.0
                                bis 1.0) an. Höhere Werte führen zu mehr
                                Genauigkeit, können den Prozess aber
                                verlangsamen.
                            </li>
                        </ul>
                        <div class="info-box tech">
                            <h4>Was ist MinHash?</h4>
                            <p>
                                MinHash ist ein Algorithmus, der eine Art
                                "Fingerabdruck" (Signatur) des Inhalts einer
                                Datei erstellt. Statt riesige Dateien komplett
                                zu vergleichen, vergleicht OptiFlow nur diese
                                kleinen Signaturen, was den Prozess extrem
                                beschleunigt.
                            </p>
                            <div class="img-container">
                                <img
                                    src="../img/settings/deduplication-minhash.png"
                                    alt="MinHash Einstellungen"
                                />
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 7. User Settings -->
                <div class="accordion-item">
                    <button class="accordion-header">
                        <i data-lucide="users"></i> Benutzer
                    </button>
                    <div class="accordion-content">
                        <p>
                            Verwalten Sie Ihr eigenes Konto oder (als Admin)
                            alle Benutzerkonten im System.
                            <strong>Achtung:</strong> Um diese Einstellungen
                            sehen zu können, müssen Sie zuerst Ihr eigenes
                            Passwort zur Bestätigung eingeben.
                        </p>
                        <h4>Mein Konto (Für alle Benutzer)</h4>
                        <div class="img-container">
                            <img
                                src="../img/settings/user-normal.png"
                                alt="Benutzereinstellungen für normale User"
                            />
                        </div>
                        <ul>
                            <li>
                                <strong>Benutzernamen ändern:</strong> Passen
                                Sie Ihren Anzeigenamen an. Sie werden danach zur
                                erneuten Anmeldung aufgefordert.
                            </li>
                            <li>
                                <strong>Passwort ändern:</strong> Ändern Sie Ihr
                                persönliches Passwort.
                            </li>
                            <li>
                                <strong>Konto löschen:</strong> Entfernen Sie
                                Ihr eigenes Konto endgültig aus dem System.
                            </li>
                        </ul>
                        <h4>Benutzerverwaltung (Nur für Admins)</h4>
                        <div class="img-container">
                            <img
                                src="../img/settings/user-admin.png"
                                alt="Admin-Ansicht der Benutzerverwaltung"
                            />
                            <p class="caption">
                                Admins sehen eine Liste aller Benutzer und haben
                                erweiterte Verwaltungsoptionen.
                            </p>
                        </div>
                        <ul>
                            <li>
                                <strong>Admin-Status ändern:</strong> Erteilen
                                oder entziehen Sie anderen Benutzern
                                Administratorrechte per Checkbox.
                            </li>
                            <li>
                                <strong>Passwort zurücksetzen:</strong> Setzen
                                Sie das Passwort für einen anderen Benutzer
                                zurück.
                            </li>
                            <li>
                                <strong>Benutzer löschen:</strong> Entfernen Sie
                                andere Benutzerkonten aus dem System.
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- 8. Database Settings -->
                <div class="accordion-item">
                    <button class="accordion-header">
                        <i data-lucide="database"></i> Datenbank
                    </button>
                    <div class="accordion-content">
                        <p>
                            Ein Werkzeug für Administratoren zur direkten
                            Interaktion mit den internen JSON-Dateien, die als
                            Datenbank für OptiFlow dienen.
                            <strong>Vorsicht:</strong> Änderungen hier können
                            die Anwendung unbrauchbar machen!
                        </p>
                        <div class="img-container">
                            <img
                                src="../img/settings/database.png"
                                alt="Datenbank-Einstellungen"
                            />
                        </div>
                        <ul>
                            <li>
                                <strong>Datei auswählen:</strong> Wählen Sie
                                eine der Kerndateien aus (z.B.
                                <code>user.json</code>,
                                <code>index.json</code>).
                            </li>
                            <li>
                                <strong>Aktionen:</strong> Je nach Datei können
                                Sie diese herunterladen, den Inhalt im Browser
                                ansehen, den Index neu aufbauen lassen oder die
                                Roh-JSON-Daten direkt bearbeiten.
                            </li>
                            <li>
                                <strong>Vorschau-Limit:</strong> Setzen Sie ein
                                Limit (in KB) für die Dateigröße, um zu
                                verhindern, dass das Laden sehr großer
                                Index-Dateien den Browser blockiert.
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- 9. System Settings -->
                <div class="accordion-item">
                    <button class="accordion-header">
                        <i data-lucide="server"></i> System
                    </button>
                    <div class="accordion-content">
                        <p>
                            Globale, serverseitige Einstellungen, die das
                            Verhalten der gesamten OptiFlow-Instanz steuern (nur
                            für Admins).
                        </p>
                        <div class="img-container">
                            <img
                                src="../img/settings/system.png"
                                alt="System-Einstellungen"
                            />
                        </div>
                        <h4>Geplante Aufgaben (Events)</h4>
                        <p>
                            Automatisieren Sie wiederkehrende Aufgaben. Sie
                            können hier Events erstellen, die zu bestimmten
                            Zeiten ausgeführt werden.
                        </p>
                        <div class="img-container">
                            <img
                                src="../img/settings/system-addevent.png"
                                alt="Hinzufügen eines neuen Events"
                            />
                            <p class="caption">
                                Der Dialog zum Erstellen einer neuen geplanten
                                Aufgabe.
                            </p>
                        </div>
                        <ul>
                            <li>
                                <strong>Aufgabentyp:</strong> Wählen Sie, was
                                getan werden soll (z.B. "Scanner
                                aktualisieren").
                            </li>
                            <li>
                                <strong>Häufigkeit & Zeit:</strong> Legen Sie
                                fest, ob die Aufgabe stündlich, täglich oder
                                wöchentlich zu einer bestimmten Uhrzeit (HH:MM)
                                ausgeführt wird.
                            </li>
                        </ul>
                        <h4>Systemsteuerung</h4>
                        <ul>
                            <li>
                                <strong>Server herunterfahren:</strong> Fährt
                                den OptiFlow-Server sicher herunter. Erfordert
                                eine doppelte Passwortbestätigung.
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </main>
        <footer>
            <p>&copy; 2025 Robin Schumacher</p>
        </footer>
        <script>
            // Simple Accordion Logic
            document.addEventListener("DOMContentLoaded", () => {
                const accordionItems =
                    document.querySelectorAll(".accordion-item");

                // Open the first item by default
                if (accordionItems.length > 0) {
                    const firstItem = accordionItems[0];
                    const firstButton =
                        firstItem.querySelector(".accordion-header");
                    const firstContent =
                        firstItem.querySelector(".accordion-content");
                    firstButton.classList.add("active");
                    firstContent.style.maxHeight =
                        firstContent.scrollHeight + "px";
                    firstContent.style.paddingTop = "1.5em";
                    firstContent.style.paddingBottom = "1.5em";
                }

                accordionItems.forEach((item) => {
                    const button = item.querySelector(".accordion-header");
                    const content = item.querySelector(".accordion-content");

                    button.addEventListener("click", () => {
                        const isActive = button.classList.contains("active");

                        // Close all items
                        accordionItems.forEach((otherItem) => {
                            otherItem
                                .querySelector(".accordion-header")
                                .classList.remove("active");
                            const otherContent =
                                otherItem.querySelector(".accordion-content");
                            otherContent.style.maxHeight = null;
                            otherContent.style.paddingTop = null;
                            otherContent.style.paddingBottom = null;
                        });

                        // If the clicked item was not active, open it
                        if (!isActive) {
                            button.classList.add("active");
                            content.style.maxHeight =
                                content.scrollHeight + "px";
                            content.style.paddingTop = "1.5em";
                            content.style.paddingBottom = "1.5em";
                        }
                    });
                });

                if (typeof lucide !== "undefined") {
                    lucide.createIcons();
                }
            });
        </script>
        <script src="doc-script.js" defer></script>
    </body>
</html>
