<!-- troubleshooting.html -->
<!DOCTYPE html>
<html lang="de">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Fehlerbehebung - OptiFlow Dokumentation</title>
        <link rel="stylesheet" href="style.css" />

        <!-- Anti-Flicker Theme Loader -->
        <script>
            (function () {
                try {
                    const theme =
                        localStorage.getItem("doc_theme") || "default";
                    if (theme !== "default") {
                        document.documentElement.setAttribute(
                            "data-theme",
                            theme
                        );
                    }
                } catch (e) {}
            })();
        </script>

        <!-- Core Scripts -->
        <script src="https://unpkg.com/lucide@latest"></script>
 
        <script src="doc-script.js" defer></script>
    </head>
    <body>
        <div class="theme-switcher-floating">
            <button id="theme-default" title="Helles Theme">
                <i data-lucide="sun"></i>
            </button>
            <button id="theme-dark" title="Dunkles Theme">
                <i data-lucide="moon"></i>
            </button>
            <button id="theme-contrast" title="Hoher Kontrast">
                <i data-lucide="contrast"></i>
            </button>
        </div>

        <header>
            <div class="header-top-row">
                <button id="pin-header-toggle" title="Kopfzeile fixieren">
                    <i data-lucide="pin"></i>
                </button>
                <h1>OptiFlow Dateimanager - Dokumentation</h1>
                <div class="search-wrapper">
                    <input
                        type="search"
                        id="doc-search-input"
                        placeholder="Dokumentation durchsuchen..."
                    />
                    <i data-lucide="search" class="lucide-search"></i>
                    <div id="search-results"></div>
                </div>
            </div>
            <nav>
                <ul>
                    <li><a href="index.html">Übersicht</a></li>
                    <li><a href="installation.html">Installation</a></li>
                    <li><a href="erste_schritte.html">Erste Schritte</a></li>
                    <li>
                        <a href="funktionen_benutzer.html"
                            >Funktionen (Benutzer)</a
                        >
                    </li>
                    <li>
                        <a href="funktionen_admin.html">Funktionen (Admin)</a>
                    </li>
                    <li><a href="einstellungen.html">Einstellungen</a></li>
                    <li><a href="datenmanagement.html">Datenmanagement</a></li>
                    <li class="active">
                        <a href="troubleshooting.html">Fehlerbehebung</a>
                    </li>
                    <li>
                        <a href="technik_sicherheit.html"
                            >Technik & Sicherheit</a
                        >
                    </li>
                    <li><a href="tastenkürzel.html">Tastenkürzel</a></li>
                </ul>
            </nav>
        </header>

        <main>
            <section id="troubleshooting-intro">
                <h2>Fehlerbehebung & Häufige Probleme</h2>
                <p>
                    Auch die beste Software kann manchmal auf unerwartete
                    Probleme stoßen. Dieser Abschnitt dient als Ihre erste
                    Anlaufstelle, wenn OptiFlow sich nicht wie erwartet verhält.
                    Wir führen Sie durch die häufigsten Szenarien und zeigen
                    Ihnen bewährte Lösungswege auf.
                </p>
            </section>

            <section id="problem-network-error">
                <h3>Problem: "Network Error" beim Login</h3>
                <p>
                    Dieser Fehler tritt typischerweise auf, wenn das Frontend
                    (Ihre App-Oberfläche) keine Verbindung zum Backend (dem
                    Server-Prozess) herstellen kann.
                </p>
                <div class="img-container">
                    <img
                        src="../img/errors/network-error.png"
                        alt="Screenshot eines Network Error Toasts"
                    />
                    <p class="caption">
                        Der "Network Error" deutet auf ein Problem mit der
                        Backend-Erreichbarkeit hin.
                    </p>
                </div>
                <div class="flow-chart">
                    <div class="flow-step">
                        <div class="flow-label">Schritt 1: Geduld</div>
                        <div class="flow-box">
                            <i data-lucide="timer"></i>
                            <p>
                                Warten Sie <strong>1-2 Minuten</strong>. Oft
                                lädt das Backend beim Start einen großen Index,
                                was dauern kann. Versuchen Sie den Login danach
                                erneut.
                            </p>
                        </div>
                        <div class="flow-arrow">&darr;</div>
                        <div class="flow-result">Problem gelöst? Super!</div>
                    </div>
                    <div class="flow-step">
                        <div class="flow-label">Schritt 2: Neustart</div>
                        <div class="flow-box">
                            <i data-lucide="power"></i>
                            <p>
                                Schließen Sie die OptiFlow-Anwendung vollständig
                                und starten Sie sie neu. Dies startet auch den
                                Backend-Prozess neu und kann Verbindungsprobleme
                                beheben.
                            </p>
                        </div>
                        <div class="flow-arrow">&darr;</div>
                        <div class="flow-result">Problem gelöst? Perfekt!</div>
                    </div>
                    <div class="flow-step">
                        <div class="flow-label">Schritt 3: Daten-Isolation</div>
                        <div class="flow-box warning">
                            <i data-lucide="folder-input"></i>
                            <p>
                                Eine beschädigte Datendatei könnte den Start des
                                Backends blockieren.
                                <strong
                                    >Löschen Sie niemals den
                                    <code>data</code>-Ordner!</strong
                                >
                                Benennen Sie ihn stattdessen vorübergehend um
                                (z.B. in <code>data_alt</code>) und starten Sie
                                die App. Wenn sie startet, liegt das Problem in
                                einer der alten Dateien.
                            </p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="problem-login-freeze">
                <h3>Problem: Der Login-Bildschirm "friert ein"</h3>
                <p>
                    Sie geben Ihr Passwort ein, klicken auf "Anmelden", aber der
                    Lade-Spinner dreht sich unendlich und nichts passiert. Das
                    Backend ist erreichbar, aber mit einer anderen, intensiven
                    Aufgabe komplett ausgelastet.
                </p>
                <div class="img-container">
                    <img
                        src="../img/errors/frozen-login.png"
                        alt="Screenshot eines eingefrorenen Logins"
                    />
                    <p class="caption">
                        Endloser Lade-Spinner: Ein Zeichen für ein überlastetes
                        Backend.
                    </p>
                </div>
                <div class="flow-chart">
                    <div class="flow-step">
                        <div class="flow-label">Schritt 1: Warten & Fragen</div>
                        <div class="flow-box">
                            <i data-lucide="users"></i>
                            <p>
                                Kommunizieren Sie mit anderen Admins (nur diese
                                können solche prozesse ausführen). Läuft gerade
                                ein großer Index-Scan, eine Entduplizierung oder
                                ein OCR-Prozess? Wenn ja, ist Warten die beste
                                Lösung.
                            </p>
                        </div>
                    </div>
                    <div class="flow-step">
                        <div class="flow-label">Schritt 2: Events prüfen</div>
                        <div class="flow-box">
                            <i data-lucide="calendar-clock"></i>
                            <p>
                                Falls niemand aktiv eine Aufgabe gestartet hat,
                                könnte ein schlecht konfiguriertes,
                                ressourcen-intensives Event (siehe
                                <a href="einstellungen.html"
                                    >Einstellungen &rarr; Server & Geplante
                                    Aufgaben</a
                                >) die Ursache sein.
                            </p>
                        </div>
                    </div>
                    <div class="flow-step">
                        <div class="flow-label">
                            Schritt 3: Daten-Isolation (wie oben)
                        </div>
                        <div class="flow-box warning">
                            <i data-lucide="folder-input"></i>
                            <p>
                                Um die Events zu umgehen, können Sie wieder den
                                <code>data</code>-Ordner (der
                                <code>events.json</code> enthält) umbenennen,
                                die App neu starten und die Event-Konfiguration
                                prüfen, nachdem Sie sich neu angemeldet haben.
                            </p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="problem-passwords">
                <h3>Problem: Passwörter & Zugriff</h3>
                <h4>Alle Admin-Passwörter vergessen</h4>
                <p>
                    Wenn kein Administrator mehr Zugriff auf das System hat,
                    kann ein "Hard Reset" der Benutzerdatenbank durchgeführt
                    werden. Eine detaillierte Anleitung finden Sie im Kapitel
                    <a href="datenmanagement.html"
                        >Datenmanagement unter "Notfall-Reset"</a
                    >.
                </p>
                <div class="info-box tech">
                    <h4>Sonderfall: Reset blockiert</h4>
                    <p>
                        In seltenen Fällen kann es vorkommen, dass die App nach
                        dem Löschen der <code>users.json</code> nicht in den
                        Einrichtungs-Modus wechselt.
                    </p>
                    <ol>
                        <li>
                            Stoppen Sie die App und benennen Sie den gesamten
                            <code>data</code>-Ordner um (z.B. in
                            <code>data_alt</code>).
                        </li>
                        <li>
                            Starten Sie die App. Sie wird einen leeren
                            <code>data</code>-Ordner erstellen.
                        </li>
                        <li>Erstellen Sie einen neuen Admin-Benutzer.</li>
                        <li>
                            Stoppen Sie die App erneut. Kopieren Sie nun die
                            alten Daten (wie <code>index.json</code>,
                            <code>events.json</code> etc.) aus
                            <code>data_alt</code> in den neuen `data`-Ordner,
                            aber <strong>ohne die alte `users.json`</strong>.
                        </li>
                        <li>Starten Sie die App.</li>
                    </ol>
                </div>

                <h4>Fehler "Ungültige Anmeldedaten" nach Passwort-Reset</h4>
                <p>
                    Ein Admin setzt Ihr Passwort zurück. Sie versuchen, sich mit
                    dem neuen Passwort anzumelden, und erhalten kurz die
                    Fehlermeldung "Ungültige Anmeldedaten", der Login
                    funktioniert aber trotzdem.
                </p>
                <ul>
                    <li>
                        <strong>Ursache:</strong> Dies ist ein harmloser
                        Anzeigefehler, der auftritt, wenn Ihr Browser noch alte
                        Daten im lokalen Speicher hat.
                    </li>
                    <li>
                        <strong>Lösung:</strong> Ignorieren Sie die Meldung. Sie
                        tritt nur einmalig auf. Alternativ können Sie die App
                        nach dem Passwort-Reset einmal komplett neu starten,
                        bevor Sie sich anmelden.
                    </li>
                </ul>
            </section>
        </main>

        <footer>
            <p>&copy; 2025 Robin Schumacher</p>
        </footer>
    </body>
</html>
